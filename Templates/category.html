<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
        <body>
            <div class = "container">  
            </div>
            <script>
        
        function displayproducts(json,keys){
            for (var i =0; i < keys.length; i++){
                console.log(json[keys[i]].Image);
                var div = document.createElement("div");
                var img = document.createElement("img");
                //img.setAttribute("src", "../static/Pictures/"+json[keys[i]].Image);
                var image = "Pictures/"+json[keys[i]].Image;
                console.log(image)
                img.src = "http://localhost:5000/static/"+image
                div.appendChild(img);
             //   document.getElementsByClassName("box")[0].appendChild(div);

                var divR = document.createElement("div");
                        divR.setAttribute("class", "row itemrow")
                        
                        var div = document.createElement("div");
                        div.setAttribute("class", "col-2") 
                        var img  = document.createElement("img");
                        img.setAttribute("class", "img-fluid");
                        img.setAttribute("src", "http://localhost:5000/static/Pictures/"+json[keys[i]].Image);
                        div.appendChild(img);

                        divR.appendChild(div);

                        div = document.createElement("div");
                        div.setAttribute("class", "col-4");

                        var div2 = document.createElement("div");
                        div2.setAttribute("class", "row");

                        var text = document.createElement("p");
                        text.setAttribute("class", "h6");
                        text.innerHTML = json[keys[i]].Name;
                        div2.appendChild(text);
                        div.appendChild(div2);
                        divR.appendChild(div);

                        div = document.createElement("div");
                        div.setAttribute("class", "col-2");
                        text = document.createElement("p");
                        text.setAttribute("class", "p");
                        text.innerHTML = json[keys[i]].Price + " Kr";
                        div.appendChild(text);
                        divR.appendChild(div);

                        document.getElementsByClassName("container")[0].appendChild(divR)


            }
        }

        var http= new XMLHttpRequest()
        var link = window.location.href.split("/")
        var id = link[link.length-2]
        http.open("GET","http://localhost:5000/Sort/"+id+"/")
        http.onreadystatechange=function(){
         
 
        if(this.readyState == 4 && this.status === 200){
            var json = JSON.parse(this.responseText)
            console.log(json)
            
            var keys = Object.keys(json)
            console.log(keys)
            displayproducts(json,keys)
            
            

          
        }
    }
          http.send()
            </script>
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>
        </body>
    </head>



</html>